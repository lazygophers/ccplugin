# 待完成任务示例 (TODO)

本文件展示 .claude/task/todo.md 的正确格式和内容结构。

## 使用规范

参考 [SKILL.md](${CLAUDE_PLUGIN_ROOT}/skills/task/SKILL.md) 中的完整指南。

## 认证与用户管理

### [P1] TASK-001 实现用户认证 API

- **类别**: feature
- **描述**:
  实现基于 JWT 的用户认证系统，包括注册、登录和令牌刷新功能。

  关键需求：
  - 支持邮箱和手机号注册
  - 密码使用 bcrypt 加密
  - JWT 令牌有效期 1 小时，刷新令牌 7 天
  - 支持多设备登录，最多 5 个活跃设备

- **验收标准**:
  - [ ] POST /auth/register 端点实现并通过单元测试
  - [ ] POST /auth/login 端点实现，支持邮箱和手机号登录
  - [ ] POST /auth/refresh 令牌刷新端点
  - [ ] 添加单元测试覆盖率 > 90%
  - [ ] 编写 API 文档（含示例）
- **子任务**:
  - [ ] 设计数据模型和数据库 schema
  - [ ] 实现注册端点
  - [ ] 实现登录端点
  - [ ] 实现令牌刷新机制
  - [ ] 编写测试

## 数据导出

### [P0] TASK-002 修复生产环境数据导出内存溢出

- **类别**: bug
- **描述**:
  用户反映在导出 >10000 条数据时，系统内存溢出，导致导出失败。

  影响范围：影响所有导出数据的用户，特别是报表和数据分析用户。

  需求：优化流处理，使用分页导出，减少内存占用，支持 100K+ 条数据导出。

- **验收标准**:
  - [ ] 导出 10,000 条数据时内存占用 < 100MB
  - [ ] 导出 100,000 条数据成功完成
  - [ ] 响应时间 < 5 分钟（单页）
  - [ ] 编写性能测试用例

## 数据库与性能

### [P2] TASK-003 优化数据库查询性能

- **类别**: refactor
- **描述**:
  当前用户列表查询在 1000+ 用户时响应缓慢（>2s）。需要通过索引优化、N+1 查询修复和缓存实现快速响应。

- **验收标准**:
  - [ ] 添加必要的数据库索引（user_status, created_at）
  - [ ] 修复 N+1 查询问题，使用 JOIN 替代
  - [ ] 添加 Redis 缓存，缓存命中率 > 80%
  - [ ] 性能测试：1000 用户查询时间 < 200ms
  - [ ] 10000 用户查询时间 < 500ms

## 文档

### [P2] TASK-004 编写 API 文档

- **类别**: docs
- **描述**:
  补充完整的 API 参考文档，包括所有端点、请求/响应格式、错误码说明。使用 OpenAPI/Swagger 规范。

- **验收标准**:
  - [ ] 编写 OpenAPI 3.0 规范文件
  - [ ] 文档覆盖所有已实现的 API 端点
  - [ ] 包含请求/响应示例
  - [ ] 生成 Swagger UI 文档
  - [ ] 文档中英文说明

## 前端 UI

### [P3] TASK-005 实现深色模式

- **类别**: feature
- **描述**:
  为前端应用添加深色模式支持，改善用户体验。用户可在设置中选择亮色/深色/跟随系统。

- **验收标准**:
  - [ ] 实现亮色/深色主题切换
  - [ ] 保存用户主题偏好到 localStorage
  - [ ] 支持系统深色模式检测
  - [ ] 所有页面和组件都有深色模式支持
  - [ ] 无色彩对比度问题（WCAG AA 标准）

## 说明

- 任务按**功能模块**分组组织，便于按领域查看和分配
- 优先级 `[P0/P1/P2/P3]` 是任务的一个属性，反映处理紧急度
- 每个任务都有唯一的编号（TASK-001 等），便于追踪和引用
- **验收标准**：具体可验证的完成条件，使用复选框跟踪
- **子任务**（可选）：适用于复杂任务，拆分为更小的可执行步骤
- 当准备开始任务时，从 TODO 移动到 IN-PROGRESS
