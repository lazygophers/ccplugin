# Python æ’ä»¶

> Python å¼€å‘æ’ä»¶ - æä¾› Python å¼€å‘è§„èŒƒã€æœ€ä½³å®è·µå’Œä»£ç æ™ºèƒ½æ”¯æŒ

## å®‰è£…

```bash
# æ¨èï¼šä¸€é”®å®‰è£…
uvx --from git+https://github.com/lazygophers/ccplugin.git@master install lazygophers/ccplugin python@ccplugin-market

# æˆ–ï¼šä¼ ç»Ÿæ–¹å¼
claude plugin marketplace add lazygophers/ccplugin
claude plugin install python@ccplugin-market
```

## åŠŸèƒ½ç‰¹æ€§

### ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

- **Python å¼€å‘ä¸“å®¶ä»£ç†** - æä¾›ä¸“ä¸šçš„ Python å¼€å‘æ”¯æŒ
  - é«˜è´¨é‡ä»£ç å®ç°
  - æ¶æ„è®¾è®¡æŒ‡å¯¼
  - æ€§èƒ½ä¼˜åŒ–å»ºè®®
  - å¼‚æ­¥ç¼–ç¨‹æ”¯æŒ

- **å¼€å‘è§„èŒƒæŒ‡å¯¼** - å®Œæ•´çš„ Python å¼€å‘è§„èŒƒ
  - **PEP 8 è§„èŒƒ** - éµå¾ª Python å®˜æ–¹ç¼–ç è§„èŒƒ
  - **ç±»å‹æç¤ºæŒ‡å¯¼** - ä½¿ç”¨ PEP 484 ç±»å‹æç¤º
  - **ç°ä»£ Python** - å……åˆ†åˆ©ç”¨ Python 3.8+ ç‰¹æ€§

- **æµ‹è¯•ä¸æ€§èƒ½** - å…¨é¢çš„æµ‹è¯•å’Œä¼˜åŒ–æ”¯æŒ
  - pytest å•å…ƒæµ‹è¯•æ¡†æ¶
  - æ€§èƒ½åˆ†æå’Œä¼˜åŒ–
  - å†…å­˜å’Œ CPU ä¼˜åŒ–
  - å¹¶å‘ç¼–ç¨‹æ”¯æŒ

- **è°ƒè¯•å·¥å…·** - ä¸“ä¸šçš„è°ƒè¯•å’Œé—®é¢˜è¯Šæ–­
  - å¼‚å¸¸è¿½è¸ªå’Œåˆ†æ
  - æ€§èƒ½ç“¶é¢ˆè¯†åˆ«
  - å†…å­˜æ³„æ¼æ£€æµ‹
  - å¹¶å‘é—®é¢˜è¯Šæ–­

### ğŸ“¦ åŒ…å«ç»„ä»¶

| ç»„ä»¶ç±»å‹ | åç§° | æè¿° |
|---------|------|------|
| Agent | `dev` | Python å¼€å‘ä¸“å®¶ |
| Agent | `test` | æµ‹è¯•ä¸“å®¶ |
| Agent | `debug` | è°ƒè¯•ä¸“å®¶ |
| Agent | `perf` | æ€§èƒ½ä¼˜åŒ–ä¸“å®¶ |
| Skill | `core` | Python æ ¸å¿ƒè§„èŒƒ |
| Skill | `error` | é”™è¯¯å¤„ç†è§„èŒƒ |
| Skill | `types` | ç±»å‹æç¤ºè§„èŒƒ |
| Skill | `testing` | æµ‹è¯•ç­–ç•¥ |
| Skill | `async` | å¼‚æ­¥ç¼–ç¨‹è§„èŒƒ |
| Skill | `web` | Web å¼€å‘è§„èŒƒ |

## ä½¿ç”¨æ–¹å¼

### 1. å¼€å‘ä¸“å®¶ä»£ç†ï¼ˆdevï¼‰

ç”¨äº Python ä»£ç å¼€å‘å’Œæ¶æ„è®¾è®¡ã€‚

**ç”¨é€”**ï¼š
- å¼€å‘æ–°åŠŸèƒ½
- è®¾è®¡ä»£ç æ¶æ„
- ä¼˜åŒ–ä»£ç å®ç°
- è§£å†³æŠ€æœ¯é—®é¢˜

**ç¤ºä¾‹**ï¼š
```
æˆ‘éœ€è¦å®ç°ä¸€ä¸ªç”¨æˆ·ç®¡ç†ç³»ç»Ÿã€‚èƒ½å¸®æˆ‘è®¾è®¡æ¶æ„å’Œç¼–å†™ä»£ç å—ï¼Ÿ
```

### 2. æµ‹è¯•ä¸“å®¶ä»£ç†ï¼ˆtestï¼‰

ç”¨äºç¼–å†™å’Œä¼˜åŒ– Python æµ‹è¯•ç”¨ä¾‹ã€‚

**ç”¨é€”**ï¼š
- è®¾è®¡æµ‹è¯•ç­–ç•¥
- ç¼–å†™å•å…ƒæµ‹è¯•
- ç¼–å†™é›†æˆæµ‹è¯•
- æé«˜æµ‹è¯•è¦†ç›–ç‡

**ç¤ºä¾‹**ï¼š
```
æˆ‘æœ‰ä¸€ä¸ªè®¡ç®—å‡½æ•°ï¼Œéœ€è¦ç¼–å†™å…¨é¢çš„æµ‹è¯•ç”¨ä¾‹ã€‚
```

### 3. è°ƒè¯•ä¸“å®¶ä»£ç†ï¼ˆdebugï¼‰

ç”¨äºè¯Šæ–­å’Œè§£å†³ Python ä»£ç é—®é¢˜ã€‚

**ç”¨é€”**ï¼š
- å¼‚å¸¸è¯Šæ–­å’Œä¿®å¤
- æ€§èƒ½ç“¶é¢ˆè¯†åˆ«
- å†…å­˜é—®é¢˜è¯Šæ–­
- å¹¶å‘é—®é¢˜æ’æŸ¥

**ç¤ºä¾‹**ï¼š
```
ç¨‹åºåœ¨å¤„ç†å¤§æ–‡ä»¶æ—¶å†…å­˜æŒç»­å¢é•¿ï¼Œå¦‚ä½•è¯Šæ–­å’Œä¿®å¤ï¼Ÿ
```

### 4. æ€§èƒ½ä¼˜åŒ–ä¸“å®¶ä»£ç†ï¼ˆperfï¼‰

ç”¨äº Python ä»£ç çš„æ€§èƒ½åˆ†æå’Œä¼˜åŒ–ã€‚

**ç”¨é€”**ï¼š
- æ€§èƒ½æµ‹é‡å’Œåˆ†æ
- æ€§èƒ½ç“¶é¢ˆä¼˜åŒ–
- å†…å­˜ä¼˜åŒ–
- å¹¶å‘ä¼˜åŒ–

**ç¤ºä¾‹**ï¼š
```
æˆ‘çš„ API å“åº”æ—¶é—´å¤ªé•¿ï¼Œå¦‚ä½•ä¼˜åŒ–æ€§èƒ½ï¼Ÿ
```

## å¼€å‘è§„èŒƒ

### ç¼–ç¨‹è§„èŒƒ

- **é£æ ¼æŒ‡å—**ï¼šéµå¾ª PEP 8 è§„èŒƒ
- **ç±»å‹æç¤º**ï¼šä½¿ç”¨ PEP 484 ç±»å‹æç¤º
- **å‘½åè§„èŒƒ**ï¼š
  - æ¨¡å—ï¼šlowercase_with_underscores
  - ç±»ï¼šCapWords
  - å‡½æ•°ï¼šlowercase_with_underscores
  - å¸¸é‡ï¼šUPPERCASE_WITH_UNDERSCORES

### é¡¹ç›®ç»“æ„

```
my-project/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ mypackage/
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ core.py
â”‚       â”œâ”€â”€ models.py
â”‚       â””â”€â”€ utils.py
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ conftest.py
â”‚   â”œâ”€â”€ test_core.py
â”‚   â””â”€â”€ test_models.py
â”œâ”€â”€ pyproject.toml
â””â”€â”€ README.md
```

### ä¾èµ–ç®¡ç†

- ä½¿ç”¨ uv è¿›è¡Œé¡¹ç›®å’Œä¾èµ–ç®¡ç†
- åœ¨ pyproject.toml ä¸­æ˜ç¡®æŒ‡å®šä¾èµ–ç‰ˆæœ¬
- ä¼˜å…ˆä½¿ç”¨ Python æ ‡å‡†åº“
- å®šæœŸæ›´æ–°å’Œç»´æŠ¤ä¾èµ–

### æµ‹è¯•æ ‡å‡†

- å…³é”®è·¯å¾„æµ‹è¯•è¦†ç›–ç‡ > 80%
- ä½¿ç”¨ pytest ä½œä¸ºæµ‹è¯•æ¡†æ¶
- ç¼–å†™æ¸…æ™°çš„æµ‹è¯•ç”¨ä¾‹åç§°
- ä½¿ç”¨ fixtures å’Œ parametrize æé«˜æµ‹è¯•æ•ˆç‡

## å¿«é€Ÿå¼€å§‹

### åˆå§‹åŒ–æ–°é¡¹ç›®

```bash
# ä½¿ç”¨ uv åˆ›å»ºæ–°é¡¹ç›®
uv new my-project
cd my-project

# æ·»åŠ ä¾èµ–
uv pip install requests pydantic

# è¿è¡Œé¡¹ç›®
uv run python -m mypackage
```

### åˆ›å»ºç¬¬ä¸€ä¸ªæ¨¡å—

```python
# src/mypackage/core.py
"""æ ¸å¿ƒæ¨¡å—."""
from typing import List


def calculate_sum(numbers: List[int]) -> int:
    """è®¡ç®—æ•°å­—åˆ—è¡¨çš„å’Œ.

    Args:
        numbers: æ•´æ•°åˆ—è¡¨.

    Returns:
        åˆ—è¡¨ä¸­æ‰€æœ‰æ•°å­—çš„å’Œ.
    """
    return sum(numbers)
```

### ç¼–å†™æµ‹è¯•

```python
# tests/test_core.py
import pytest
from mypackage.core import calculate_sum


class TestCalculateSum:
    """æµ‹è¯• calculate_sum å‡½æ•°."""

    def test_normal_case(self):
        """æ­£å¸¸æƒ…å†µ."""
        result = calculate_sum([1, 2, 3, 4, 5])
        assert result == 15

    @pytest.mark.parametrize("numbers,expected", [
        ([1], 1),
        ([1, 1], 2),
        ([], 0),
    ])
    def test_various_inputs(self, numbers, expected):
        """å‚æ•°åŒ–æµ‹è¯•."""
        assert calculate_sum(numbers) == expected
```

## æœ€ä½³å®è·µ

### 1. ä»£ç ç»„ç»‡

- ä½¿ç”¨ src/ å¸ƒå±€åˆ†éš”æºä»£ç å’Œæµ‹è¯•
- æ¨¡å—åæ¸…æ™°è¡¨è¾¾åŠŸèƒ½ï¼ˆcore.pyã€models.pyã€utils.pyï¼‰
- åœ¨ __init__.py ä¸­å®šä¹‰å…¬å…± API

### 2. ç±»å‹æç¤º

- ä¸ºæ‰€æœ‰å‡½æ•°æ·»åŠ å‚æ•°å’Œè¿”å›ç±»å‹æç¤º
- ä½¿ç”¨ Optional[T] è¡¨ç¤ºå¯é€‰å€¼
- ä½¿ç”¨ Listã€Dictã€Union ç­‰å®¹å™¨ç±»å‹
- ä½¿ç”¨ TypeVar å®ç°æ³›å‹

### 3. æ–‡æ¡£å’Œæ³¨é‡Š

- ç¼–å†™æ¸…æ™°çš„æ¨¡å—å’Œå‡½æ•°æ–‡æ¡£å­—ç¬¦ä¸²
- è§£é‡Šä¸ºä»€ä¹ˆè€Œä¸æ˜¯æ˜¯ä»€ä¹ˆ
- ä¸ºå¤æ‚ç®—æ³•å’Œéæ˜¾è€Œæ˜“è§çš„å†³å®šæ·»åŠ æ³¨é‡Š

### 4. é”™è¯¯å¤„ç†

- å®šä¹‰æ¸…æ™°çš„å¼‚å¸¸å±‚çº§
- æ•è·å…·ä½“å¼‚å¸¸ï¼Œä¸è¦ä½¿ç”¨ except Exception
- è®°å½•å®Œæ•´çš„å¼‚å¸¸ä¿¡æ¯ï¼ˆexc_info=Trueï¼‰

### 5. æ€§èƒ½

- ä¼˜å…ˆè€ƒè™‘ä»£ç å¯è¯»æ€§è€Œä¸æ˜¯è¿‡åº¦ä¼˜åŒ–
- ä½¿ç”¨ profiling å·¥å…·æµ‹é‡å…³é”®éƒ¨åˆ†çš„æ€§èƒ½
- å®šæœŸè¿›è¡ŒåŸºå‡†æµ‹è¯•ä»¥æ£€æµ‹æ€§èƒ½å›å½’

## å‚è€ƒèµ„æº

### å®˜æ–¹æ–‡æ¡£

- [PEP 8 - é£æ ¼æŒ‡å—](https://www.python.org/dev/peps/pep-0008/)
- [PEP 484 - ç±»å‹æç¤º](https://www.python.org/dev/peps/pep-0484/)
- [Python æ–‡æ¡£](https://docs.python.org/)

### å·¥å…·æ–‡æ¡£

- [pytest æ–‡æ¡£](https://docs.pytest.org/)
- [uv æ–‡æ¡£](https://docs.astral.sh/uv/)
- [mypy æ–‡æ¡£](https://mypy.readthedocs.io/)

## è®¸å¯è¯

AGPL-3.0-or-later
