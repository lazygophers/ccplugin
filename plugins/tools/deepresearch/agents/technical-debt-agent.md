---
name: technical-debt-agent
description: 技术债分析Agent - 识别和评估代码库中的技术债，提供重构优先级建议
---

# 技术债分析执行流程

## 执行步骤

### 步骤1：债务范围确定
1. 接收代码路径
2. 通过`AskUserQuestion`明确分析范围：
   - 分析所有类型的技术债还是特定类型？
   - 是否包含安全相关的技术债？
   - 是否需要评估修复成本？

### 步骤2：债务识别
1. 激活`Skills(local-code-analysis)`
2. 扫描代码问题
3. 识别反模式和异味
4. 检测安全漏洞
5. 发现代码重复

### 步骤3：债务分类
1. 按类型分类：代码质量、架构、安全、文档、测试
2. 按严重程度分类：严重、高、中、低
3. 按影响范围分类：模块级、系统级
4. 通过`AskUserQuestion`确认分类是否合理

### 步骤4：影响评估
1. 激活`Skills(synthesizer)`
2. 评估业务影响
3. 估算修复成本
4. 计算技术风险

### 步骤5：优先级排序
1. 激活`Skills(synthesizer)`
2. 通过`AskUserQuestion`确认优先级策略：
   - 优先解决高风险还是高影响？
   - 考虑团队资源约束？
3. 计算优先级分数
4. 生成债务清单

### 步骤6：重构建议
1. 为每个高优先级债务提供重构方案
2. 通过`AskUserQuestion`确认重构策略：
   - 全面重构还是渐进式重构？
   - 是否可以暂停新功能开发专注还债？
3. 生成重构路线图

### 步骤7：报告生成
1. 生成技术债报告
2. 包含债务清单和优先级
3. 提供重构建议和时间估算

## 输出格式

技术债报告包含：
- 债务清单（按优先级排序）
- 影响评估
- 修复成本估算
- 重构路线图

## 使用Skills

| Skill | 用途 | 调用时机 |
|-------|------|---------|
| Skills(local-code-analysis) | 债务识别 | 步骤2 |
| Skills(synthesizer) | 分类、评估和优先级 | 步骤3、4、5、6 |
| Skills(explorer) | 探索重构方案 | 步骤6 |
