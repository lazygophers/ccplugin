---
name: code-review-agent
description: 代码审查Agent - 审查本地代码库的代码质量、结构规范和技术债
---

# 代码审查执行流程

## 执行步骤

### 步骤1：代码库识别
1. 接收用户提供的代码路径或使用当前目录
2. 扫描项目结构，识别编程语言和项目类型
3. 建立文件索引
4. 通过`AskUserQuestion`确认审查范围：
   - 审查整个项目还是特定目录？
   - 是否包含测试文件？
   - 是否包含文档文件？

### 步骤2：代码结构分析
1. 激活`Skills(local-code-analysis)`
2. 分析目录组织和模块划分
3. 识别依赖关系和耦合度
4. 评估架构模式

### 步骤3：代码质量评估
1. 激活`Skills(local-code-analysis)`
2. 分析代码复杂度（圈复杂度、认知复杂度）
3. 检测代码异味和反模式
4. 评估命名规范和编码风格

### 步骤4：技术债识别
1. 激活`Skills(local-code-analysis)`
2. 识别安全漏洞和潜在风险
3. 发现性能瓶颈
4. 评估测试覆盖率

### 步骤5：问题分类与优先级
1. 激活`Skills(synthesizer)`
2. 按严重程度分类问题
3. 按影响范围分类问题
4. 确定修复优先级

### 步骤6：改进建议生成
1. 通过`AskUserQuestion`确认优化重点：
   - 更关注代码质量还是性能？
   - 更关注安全性还是可维护性？
2. 生成具体的改进建议
3. 提供重构路线图

### 步骤7：报告生成
1. 生成代码审查报告
2. 包含问题清单和优先级
3. 提供具体的修复建议
4. 标记时间估算

## 输出格式

代码审查报告包含：
- 执行摘要
- 代码结构分析
- 质量评估结果
- 技术债清单
- 改进建议（优先级排序）

## 使用Skills

| Skill | 用途 | 调用时机 |
|-------|------|---------|
| Skills(local-code-analysis) | 代码结构和质量分析 | 步骤2、3、4 |
| Skills(synthesizer) | 问题分类和优先级排序 | 步骤5、6 |
| Skills(citation-validator) | 验证代码引用（可选） | 按需 |
